[![Build Status](https://travis-ci.org/mickelindahl/hapi_account.svg?branch=master)](https://travis-ci.org/mickelindahl/hapi_account)
[![Coverage Status](https://coveralls.io/repos/github/mickelindahl/hapi_account/badge.svg?branch=2.0.1)](https://coveralls.io/github/mickelindahl/hapi_account?branch=2.0.1)

Hapi account
=============

A REST api for accounts built for [hapi](https://hapijs.com) server with 
Bearer token authentication using [hapi-beaer-token-atuh]() and  
 database for storage of accounts using [waterline](https://www.npmjs.com/package/waterline).
Default adapter is [sails-disk](https://www.npmjs.com/package/sails-disk)


## Features

* Facebook login
* Google login
* Bearer token auth with cookie
* Bearer token auth with payload
* Automatic deletion of expired tokens
* Email verification and password reset
* Add custom pre and post calls to each route.

## Installation

`npm install --save hapi-account `

## Usage
```js
'use strict'

const Hapi = require( 'hapi' );

const server = new Hapi.Server({);

server.register( {
    register: require( 'hapi-account' ),
    options: { 
        accountVerified:false,
        basePath: "account",
        events:[
          {type: 'onPostCreate', method:(request, next)=>{...the madgic}}  
          {type: 'onPostForgotPassword', method:(request, next)=>{...the madgic}}                  
        ] ,
    }
});
```

## Facebook login
To get your `options.facebook.app_id` and `options.facebook.app_secret` got to
[Facebook for developers](https://developers.facebook.com/). Login to an account and
go to My Apps. Either user keys from an an existing app or create a new one. App id and secret
can be found under settings


## Google login
To get your `options.google.client_id` go to [Google cloud console](https://console.cloud.google.com) and login.
Choose and existing project in the top bar or create a new one. Go to APIs & Services to
create or use existing client id

## Email
Get your preferred transporter for [nodmailer](https://www.npmjs.com/package/nodemailer) and add to
`options.email.transporter`

## Routes
Routes can be viewed using [hapi-swagger](https://www.npmjs.com/package/hapi-swagger)

## API
{{>all-docs~}}

## Tests

```
npm run test
```

## Contributing

Feel free to submit issues and pull request on bugs or feature request.

In lieu of a formal styleguide, take care to maintain the existing coding style.
Add unit tests for any new or changed functionality.

## Release History
